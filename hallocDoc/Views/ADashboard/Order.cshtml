@model halloDocEntities.ViewDataModels.SendOrder;
@{
    ViewData["Title"] = "Order";
    Layout = "~/Views/Shared/_ADashboard.cshtml";
}
<div class="docMain mt-3">
    <div class="dmboxbar">
        <h2 m-0>Send Order</h2>
        <a asp-area="" asp-controller="ADashboard" asp-action="Dmain" asp-route-id="2" class="logout tdn dmnewreq mb-3">Back</a>
    </div>

    <div class="dmbox">
        <form asp-controller="ReqForm" asp-action="Patient" enctype="multipart/form-data" class="row g-2 g-md-3">



            <div class="form-floating col-12 col-md-6 d-flex justify-content-center align-items-center">
                <select id="profdropdown" asp-for="profession" class="form-select pt-0 pb-0">
                    <option value="" selected>Select profession</option>
                    @foreach (var ritem in Model.professionList)
                    {
                        <option value="@ritem.HealthProfessionalId">@ritem.Healthprofessionals</option>

                    }
                </select>
                <span asp-validation-for="profession" class="text-danger"></span>
            </div>
            <div class="form-floating col-12 col-md-6 d-flex justify-content-center align-items-center">
                <select asp-for="business" class="form-select pt-0 pb-0">
                    <option value="" selected>Select business</option>
                    @foreach (var ritem in Model.businessList)
                    {
                        <option value="@ritem.VendorId">@ritem.VendorName</option>
                        <option class="businessOption" data-profession-id="@ritem.Profession" value="@ritem.VendorId">@ritem.VendorName</option>

                    }
                </select>
                <span asp-validation-for="business" class="text-danger"></span>
            </div>

            <div class="form-floating col-12 col-md-6">
                <input asp-for="Contact" type="text" class="form-control" id="fdate1" placeholder="Password">
                <label class="mylable" for="fdate1">Business Contact</label>
                <span asp-validation-for="Contact" class="text-danger"></span>
            </div>
            <div class="form-floating col-12 col-md-6">
                <input asp-for="email" type="text" class="form-control" id="fdate2" placeholder="Password">
                <label class="mylable" for="fdate2">Business email</label>
                <span asp-validation-for="email" class="text-danger"></span>
            </div>
            <div class="form-floating col-12 col-md-6">
                <input asp-for="fax" type="text" class="form-control" id="fdate3" placeholder="Password">
                <label class="mylable" for="fdate3">Fax</label>
                <span asp-validation-for="fax" class="text-danger"></span>
            </div>

            <div class=" form-floating col-12 mb-2">
                <textarea asp-for="orderDetail" class="form-control h-100" id="floatingInput1" rows="3"
                          placeholder="Enter symptoms details in detail(optional)"></textarea>
                <label class="mylable" for="floatingInput1">Prescription or order details</label>
                <span asp-validation-for="orderDetail" class="text-danger"></span>
            </div>
            <div class="form-floating col-12 col-md-6 d-flex justify-content-center align-items-center">
                <select asp-for="refill" class="form-select pt-0 pb-0">
                    <option selected>Number Retail</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
                <span asp-validation-for="refill" class="text-danger"></span>
            </div>

            <div class="btnline">
                <button type="submit" class="btn btn-outline-primary active blbtn">Submit</button>
                <button type="button" asp-area="" asp-controller="ReqForm" asp-action="Patient" class="btn btn-outline-primary blbtn">Cancel</button>
            </div>

        </form>
    </div>
</div>

@section AddScript{
    <script>
        $('#profdropdown').change(function () {
            console.log("new");
            var selectedprofessionId = $(this).val(); // Get the selected region ID

            $('.businessOption').each(function () {
                var businessProfessionId = $(this).attr('data-profession-id'); // Get the physician's region ID

                // Check if selected region ID is empty or matches the physician's region ID
                if (selectedprofessionId === '' || businessProfessionId === selectedprofessionId) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });
    </script>
}